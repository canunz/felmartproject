

<style>

  
</style>
<!-- views/partials/header.ejs -->
<header class="main-header">
  <div class="container-fluid">
    <nav class="navbar navbar-expand-lg">
      <!-- Logo in the corner -->
      <a href="/dashboard" class="navbar-brand">
        <img src="/img/logo.png" alt="Felmart Logo" class="navbar-logo">
      </a>
      
      <!-- Hamburger Toggle for Mobile -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar">
        <i class="fas fa-bars"></i>
      </button>
      
      <!-- Main Navigation -->
      <div class="collapse navbar-collapse" id="mainNavbar">
        <ul class="navbar-nav">
          <li class="nav-item <%= titulo.includes('Dashboard') || titulo.includes('Panel') ? 'active' : '' %>">
            <a href="/dashboard" class="nav-link">
              <i class="fas fa-home"></i>
              <span>Dashboard</span>
            </a>
          </li>
          
          <% if (usuario.rol === 'administrador') { %>
            <!-- Admin Dropdown -->
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">
                <i class="fas fa-cogs"></i>
                <span>Administración</span>
              </a>
              <div class="dropdown-menu">
                <a href="/usuarios" class="dropdown-item <%= titulo.includes('Usuario') ? 'active' : '' %>">
                  <i class="fas fa-users"></i>
                  <span>Usuarios</span>
                </a>
                <a href="/clientes" class="dropdown-item <%= titulo.includes('Cliente') && !titulo.includes('Panel') ? 'active' : '' %>">
                  <i class="fas fa-building"></i>
                  <span>Clientes</span>
                </a>
                <a href="/residuos" class="dropdown-item <%= titulo.includes('Residuo') ? 'active' : '' %>">
                  <i class="fas fa-trash-alt"></i>
                  <span>Residuos</span>
                </a>
              </div>
            </li>
          <% } %>
          
          <!-- Gestión Dropdown -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">
              <i class="fas fa-tasks"></i>
              <span>Gestión</span>
            </a>
            <div class="dropdown-menu">
              <% if (usuario.rol === 'cliente') { %>
                <a href="/perfil" class="dropdown-item <%= titulo.includes('Perfil') ? 'active' : '' %>">
                  <i class="fas fa-user"></i>
                  <span>Mi Perfil</span>
                </a>
              <% } %>
              <a href="/solicitudes" class="dropdown-item <%= titulo.includes('Solicitud') ? 'active' : '' %>">
                <i class="fas fa-file-alt"></i>
                <span>Solicitudes</span>
              </a>
              <a href="/cotizaciones" class="dropdown-item <%= titulo.includes('Cotizaci') ? 'active' : '' %>">
                <i class="fas fa-file-invoice-dollar"></i>
                <span>Cotizaciones</span>
              </a>
              <a href="/calendario" class="dropdown-item <%= titulo.includes('Calendario') ? 'active' : '' %>">
                <i class="fas fa-calendar-alt"></i>
                <span>Calendario</span>
              </a>
              <a href="/certificados" class="dropdown-item <%= titulo.includes('Certificado') ? 'active' : '' %>">
                <i class="fas fa-certificate"></i>
                <span>Certificados</span>
              </a>
            </div>
          </li>
          
          <% if (usuario.rol !== 'cliente') { %>
            <li class="nav-item <%= titulo.includes('Estadística') ? 'active' : '' %>">
              <a href="/reportes/dashboard" class="nav-link">
                <i class="fas fa-chart-line"></i>
                <span>Estadísticas</span>
              </a>
            </li>
          <% } %>
        </ul>
        
        <!-- Right Side - User Menu -->
        <ul class="navbar-nav ms-auto">
          <!-- Notifications -->
          <li class="nav-item">
            <a href="#" class="nav-link notification-link" id="notificationsButton">
              <i class="fas fa-bell"></i>
              <span class="notification-badge d-none" id="contador-notificaciones">0</span>
            </a>
          </li>
          
          <!-- User Dropdown -->
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle user-dropdown-toggle" data-bs-toggle="dropdown">
              <div class="user-avatar">
                <i class="fas fa-user"></i>
              </div>
              <span class="d-none d-md-inline-block ms-2"><%= usuario.nombre %></span>
            </a>
            <div class="dropdown-menu dropdown-menu-end">
              <div class="dropdown-header">
                <strong><%= usuario.nombre %></strong>
                <div class="small text-muted"><%= usuario.rol %></div>
              </div>
              <div class="dropdown-divider"></div>
              <a href="/perfil" class="dropdown-item">
                <i class="fas fa-user-circle me-2"></i>
                <span>Mi Perfil</span>
              </a>
              <a href="/usuarios/cambiar-password" class="dropdown-item">
                <i class="fas fa-key me-2"></i>
                <span>Cambiar Contraseña</span>
              </a>
              <div class="dropdown-divider"></div>
              <a href="/logout" class="dropdown-item text-danger">
                <i class="fas fa-sign-out-alt me-2"></i>
                <span>Cerrar Sesión</span>
              </a>
            </div>
          </li>
        </ul>
      </div>
    </nav>
  </div>
</header>